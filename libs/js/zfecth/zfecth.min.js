!function(t){"use strict";const e=t=>t&&"object"==typeof t&&!Array.isArray(t);function n(t={}){const n=new Map,r=[],o=[],s={baseURL:t.baseURL||"",timeout:t.timeout||0,headers:Object.assign({},t.headers||{}),interceptors:{request:[],response:[]},transformRequest:[],transformResponse:[],maxConcurrent:"number"==typeof t.maxConcurrent?t.maxConcurrent:1/0};if(e(s.baseURL)&&"function"==typeof s.baseURL.resolve)try{s.baseURL=s.baseURL.resolve()}catch{s.baseURL=String(s.baseURL.toString?s.baseURL.toString():"")}else e(s.baseURL)&&"function"==typeof s.baseURL.toString&&(s.baseURL=s.baseURL.toString());let a=0;const i=[];function c(t,e,n){let r="";try{r=n?JSON.stringify(n):""}catch{r=String(n)}return`${t.toUpperCase()}::${e}::${r}`}function u(t){let e=t;for(const t of s.interceptors.response)try{e=t(e)||e}catch(t){}return e}function l(t,e){let n=t;for(const t of s.transformResponse)try{n=t(n,e)||n}catch{}return n}function d(t,e){for(const n of o)try{n(t,e)}catch(t){}}async function f(t,e,r={}){const o=function(t){if(!t)return s.baseURL||"";if(/^https?:\/\//i.test(t))return t;const e=s.baseURL||"";return e?e.endsWith("/")||t.startsWith("/")?`${e.replace(/\/+$/,"")}/${t.replace(/^\/+/,"")}`:`${e}/${t.replace(/^\/+/,"")}`:t}(e);let f=Object.assign({},s.headers,r.headers||{}),p="body"in r?r.body:void 0!==r.data?r.data:void 0,h="timeout"in r?r.timeout:s.timeout;const g="retry"in r?r.retry:r.retries||0,y=r.retryDelay||300,b=r.cache||0,m=r.group&&r.group.signal?r.group.signal:null;p=function(t,e){let n=t;for(const t of s.transformRequest)try{n=t(n,e)||n}catch{}return n}(p,f);let w={method:t.toUpperCase(),headers:Object.assign({},f),body:void 0};if(null!=p&&"GET"!==t&&"HEAD"!==t){const t=Object.keys(w.headers).find(t=>"content-type"===t.toLowerCase()),e=t?String(w.headers[t]):"";e&&e.includes("application/json")&&"string"!=typeof p?w.body=JSON.stringify(p):w.body=p}if(r.signal&&(w.signal=r.signal),m){const t=new AbortController;if(w.signal&&"function"==typeof w.signal.addEventListener)try{w.signal.addEventListener("abort",()=>t.abort(),{once:!0})}catch{}if(m&&"function"==typeof m.addEventListener)try{m.addEventListener("abort",()=>t.abort(),{once:!0})}catch{}w.signal=t.signal}let L={url:o,method:w.method,options:w,timeout:h,retries:g,retryDelay:y,cacheTTL:b,original:{url:e,opts:r}};L=function(t){let e=t;for(const t of s.interceptors.request)try{e=t(e)||e}catch(t){}return e}(L)||L,w=L.options,h=L.timeout;const v=L.url,T=c(L.method,v,w&&w.body);if("GET"===L.method&&b>0){const t=function(t){const e=n.get(t);return e?e.expiresAt&&Date.now()>e.expiresAt?(n.delete(t),null):e.value:null}(T);if(t){let e=Object.assign({},t);return e=u(e)||e,e.data=l(e.data,e)||e.data,e}}return function(t){return new Promise((e,n)=>{const r=()=>{a++,t().then(e,n).finally(()=>{a--,i.length&&i.shift()()})};a<s.maxConcurrent?r():i.push(r)})}(async()=>{let t;try{t=await async function(t){const{url:e,options:n,retries:r=0,retryDelay:o=300,retryOn:s=[429,502,503,504],timeout:a}=t;let i=0;const c=Date.now();for(;;){i++;const t=new AbortController;if(n&&n.signal)try{n.signal.addEventListener("abort",()=>t.abort(),{once:!0})}catch{}let u;"number"==typeof a&&a>0&&(u=setTimeout(()=>t.abort(),a));const l=Object.assign({},n,{signal:t.signal});let d;try{d=await fetch(e,l),u&&clearTimeout(u)}catch(e){if(u&&clearTimeout(u),t.signal&&t.signal.aborted&&e&&"AbortError"===e.name)throw e;if(i<=r){const t=o*Math.pow(2,i-1),e=Math.floor(Math.random()*o);await new Promise(n=>setTimeout(n,t+e));continue}throw e}if(!d.ok&&i<=r&&s.includes(d.status)){const t=o*Math.pow(2,i-1),e=Math.floor(Math.random()*o);await new Promise(n=>setTimeout(n,t+e));continue}return{res:d,duration:Date.now()-c}}}({url:v,options:w,retries:L.retries,retryDelay:L.retryDelay,timeout:h})}catch(t){const e={ok:!1,status:0,data:null,error:t,config:L};return d(t,L),e}const{res:e,duration:r}=t;let o=null;o=(e.headers&&e.headers.get&&e.headers.get("Content-Type")||"").includes("application/json")?await(async t=>{try{return await t.json()}catch{return null}})(e):await e.text().catch(()=>null);const s={ok:e.ok,status:e.status,statusText:e.statusText,headers:e.headers,data:o,config:L,time:r};s.data=l(s.data,s);let a=u(s)||s;if(!e.ok){const t=new Error(`HTTP ${e.status} ${e.statusText}`);return t.status=e.status,t.response=a,d(t,L),{ok:!1,status:e.status,data:a.data,error:t,config:L}}return"GET"===L.method&&b>0&&n.set(T,{value:a,expiresAt:b>0?Date.now()+1e3*b:null}),a})}const p={};return["get","post","put","patch","delete","head"].forEach(t=>{p[t]=(n,r={},o={})=>{let s=null,a={};if("get"===t||"head"===t||"delete"===t)a=r||{};else{s=r,a=o||{},a.headers||(a.headers={});!Object.keys(a.headers).find(t=>"content-type"===t.toLowerCase())&&e(s)&&(a.headers["Content-Type"]="application/json"),a.body=s}return f(t,n,a)}}),p.request=(t={})=>{const e=(t.method||"GET").toLowerCase(),n=t.url||t.path||t.pathname||"";return["get","post","put","patch","delete","head"].includes(e)?"get"===e||"head"===e||"delete"===e?p[e](n,t):p[e](n,t.data||t.body||{},t):f(e,n,t)},p.use=function(t={}){return"function"==typeof t.request&&s.interceptors.request.push(t.request),"function"==typeof t.response&&s.interceptors.response.push(t.response),p},p.addTransformRequest=t=>("function"==typeof t&&s.transformRequest.push(t),p),p.addTransformResponse=t=>("function"==typeof t&&s.transformResponse.push(t),p),p.usePlugin=function(t){if("function"==typeof t)try{t(p,s),r.push(t)}catch(t){}return p},p.onError=function(t){return"function"==typeof t&&o.push(t),p},p.CancelToken=function(){const t=new AbortController;return{signal:t.signal,cancel:e=>t.abort(e)}},p.cancelGroup=function(){const t=new AbortController;return{signal:t.signal,cancel:e=>t.abort(e)}},p.all=function(t){return Promise.all(t)},p.setToken=function(t,e="Bearer"){return t?s.headers.Authorization=`${e} ${t}`:delete s.headers.Authorization,p},p.clearCache=function(){return n.clear(),p},p.deleteCacheKey=function(t,e,r){return n.delete(c(t,e,r)),p},p.config=s,p._internal={memoryCache:n,plugins:r,globalErrors:o},p}n.env=function(){return function(){const e={dev:null,prod:null,staging:null,other:{}},n={dev:t=>(e.dev=String(t),n),prod:t=>(e.prod=String(t),n),staging:t=>(e.staging=String(t),n),otherEnv:(t,r)=>("string"==typeof t&&(e.other[t]=String(r)),n),resolve(n){let r="";return"string"==typeof n&&n.length?r=n.toLowerCase():"undefined"!=typeof location&&location&&location.hostname?r=(location.hostname||"").toLowerCase():void 0!==t&&t&&t.process&&t.process.env&&t.process.env.HOSTNAME&&(r=String(t.process.env.HOSTNAME).toLowerCase()),r.includes("localhost")||r.startsWith("127.")||"0.0.0.0"===r?e.dev||e.prod||e.staging||"":r.includes("staging")?e.staging||e.prod||e.dev||"":e.prod||e.dev||e.staging||""},toString:()=>n.resolve(),_ctx:e};return n}()},"undefined"!=typeof module&&module.exports?module.exports=n:t.zjs=n}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this);