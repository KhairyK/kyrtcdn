const isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,themes={light:{bg:"#ffffff",color:"#111",border:"1px solid #e5e7eb"},dark:{bg:"#1f2937",color:"#fff",border:"1px solid rgba(255,255,255,.08)"}},sizePreset={sm:{width:"260px",padding:"10px"},md:{width:"320px",padding:"14px"},lg:{width:"420px",padding:"18px"}},juiceToast={_config:{},_queue:[],_showing:!1,_theme:"dark",setup(e={}){this._config=e,this._registerTypes()},addType(e,t={}){this._config[e]=t,this._registerTypes()},defineTheme(e,t={}){themes[e]={...themes[e]||{},...t}},setTheme(e){if(this._theme=e,!isBrowser)return;const t=document.getElementById("juice-toast-root");t&&(t.dataset.theme=e)},clear(){this._queue.length=0},destroy(){this.clear(),isBrowser&&document.getElementById("juice-toast-root")?.remove()},_registerTypes(){Object.keys(this._config).forEach(e=>{if("function"==typeof this[e]&&!this[e].__auto)return;const t=t=>this._enqueue(e,t);t.__auto=!0,this[e]=t})},_enqueue(e,t){this._queue.push({type:e,payload:t}),this._showing||this._next()},_next(){if(!this._queue.length)return void(this._showing=!1);this._showing=!0;const e=this._queue.shift();this._showToast(e.type,e.payload)},_getRoot(e){if(!isBrowser)return null;let t=document.getElementById("juice-toast-root");return t||(t=document.createElement("div"),t.id="juice-toast-root",document.body.appendChild(t)),t.dataset.position=e||"bottom",t.dataset.theme=this._theme,t},_showToast(e,t){if(!isBrowser)return;const i={...this._config[e]||{},..."object"==typeof t?t:{message:String(t)}};i.icon=i.icon??i.icon_left_top,i.iconPack=i.iconPack??i.icon_config,i.iconLink=i.iconLink??i.icon_onClick_url,i.iconAnimate=i.iconAnimate??i.icon_onClick_animate,i.position=i.position??i.toast,i.closable=i.closable??i.closeable,i.iconPosition=i.iconPosition||"left",i.compact=!!i.compact;const o=themes[i.theme||this._theme]||{},n=document.createElement("div");if(n.className="juice-toast",i.size&&sizePreset[i.size]){const e=sizePreset[i.size];e.width&&(n.style.width=e.width),e.padding&&(n.style.padding=e.padding)}i.compact&&n.classList.add("jt-compact"),i.width&&(n.style.width=i.width),i.height&&(n.style.height=i.height),n.style.background=i.bg||o.bg,n.style.color=i.color||o.color,n.style.border=i.border||o.border;let s=null;i.icon&&(s=document.createElement("i"),s.className=["icon",i.iconPack||"",i.icon].join(" ").trim(),i.iconSize&&(s.style.fontSize=i.iconSize),(i.iconLink||i.iconAnimate)&&(s.classList.add("icon-clickable"),s.onclick=e=>{e.stopPropagation(),i.iconAnimate&&(s.classList.remove(i.iconAnimate),s.offsetWidth,s.classList.add(i.iconAnimate)),i.iconLink&&window.open(i.iconLink,"_blank","noopener")}));const c=document.createElement("div");if(c.className="jt-content",i.title){const e=document.createElement("div");e.className="jt-title",e.textContent=i.title,c.appendChild(e)}const a=document.createElement("div");if(a.className="jt-message",a.textContent=i.message||"",c.appendChild(a),s&&"top"===i.iconPosition?(n.classList.add("jt-icon-top"),n.appendChild(s),n.appendChild(c)):s&&"right"===i.iconPosition?(n.appendChild(c),n.appendChild(s)):(s&&n.appendChild(s),n.appendChild(c)),Array.isArray(i.actions)&&i.actions.length){const e=document.createElement("div");e.className="jt-actions",i.actions.forEach(t=>{const i=document.createElement("button");i.className="jt-action",i.textContent=t.label,i.onclick=e=>{e.stopPropagation(),t.onClick?.(e),t.closeOnClick&&(n.remove(),this._next())},e.appendChild(i)}),c.appendChild(e)}if(i.closable){const e=document.createElement("span");e.className="juice-toast-close",e.innerHTML="Ã—",e.onclick=()=>{n.remove(),this._next()},n.appendChild(e)}this._getRoot(i.position).appendChild(n),requestAnimationFrame(()=>n.classList.add("show"));const d=i.duration??2500;0!==d&&setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>{n.remove(),this._next()},300)},d)}};export default juiceToast;export{juiceToast};