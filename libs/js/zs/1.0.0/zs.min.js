// MIT LICENSE
(()=>{"use strict";const e={},r=[];async function s(s){try{r.length=0;const o=function(e){let r=String(e);return r=r.replace(/\r/g,""),r=r.replace(/@function\s+(\w+)\s*\(([^)]*)\)\s*{\s*([^}]*)\s*}/g,"function $1($2) { $3 }"),r=r.replace(/@function\s+(\w+)\s*{\s*([^}]*)\s*}/g,"function $1() { $2 }"),r=r.replace(/@call\s+([^\s(]+)\s*\(([^)]*)\)/g,"$1($2)"),r=r.replace(/@call\s+([^\s(]+)/g,"$1()"),r=r.replace(/@set\s+(\w+)\s*=\s*(.+)/g,"const $1 = $2"),r=r.replace(/@var\s+(\w+)\s*=\s*(.+)/g,"let $1 = $2"),r=r.replace(/@element\s+([#.\w-]+)\s*{\s*text\s+"([^"]+)"\s*}/g,'document.querySelector("$1").textContent = "$2"'),r=r.replace(/@element\s+([#.\w-]+)\s*{\s*html\s+"([^"]+)"\s*}/g,'document.querySelector("$1").innerHTML = "$2"'),r=r.replace(/@id\s+#([\w-]+)/g,'document.getElementById("$1")'),r=r.replace(/@select\s+([#.][\w-]+)/g,'document.querySelector("$1")'),r=r.replace(/@all\s+([#.][\w-]+)/g,'document.querySelectorAll("$1")'),r=r.replace(/append\s+"([^"]+)"/g,'insertAdjacentHTML("beforeend", "$1")'),r=r.replace(/@on\s+(\w+)\s+([#.\w-]+)\s*{\s*log\s+"([^"]+)"\s*}/g,'document.querySelector("$2").addEventListener("$1", () => console.log("$3"))'),r=r.replace(/@on\s+(\w+)\s+([#.\w-]+)\s*{\s*([^}]*)\s*}/g,'document.querySelector("$2").addEventListener("$1", () => { $3 })'),r=r.replace(/@log\s+"([^"]+)"/g,'console.log("$1")'),r=r.replace(/@warn\s+"([^"]+)"/g,'console.warn("$1")'),r=r.replace(/@info\s+"([^"]+)"/g,'console.info("$1")'),r=r.replace(/@error\s+"([^"]+)"/g,'console.error("$1")'),r=r.replace(/@log\s*\(\s*([^)]+)\s*\)/g,"console.log($1)"),r=r.replace(/@warn\s*\(\s*([^)]+)\s*\)/g,"console.warn($1)"),r=r.replace(/@info\s*\(\s*([^)]+)\s*\)/g,"console.info($1)"),r=r.replace(/@error\s*\(\s*([^)]+)\s*\)/g,"console.error($1)"),r=r.replace(/text\s+"([^"]+)"/g,'"$1"'),r=r.replace(/html\s+"([^"]+)"/g,'"$1"'),r=r.replace(/@import\s+"([^"]+)"\s*->\s*(\w+)/g,'const $2 = await __ZS_IMPORT__("$1", "$2");'),r=r.replace(/@export\s+(\w+)/g,'exports["$1"] = $1'),r=r.replace(/@if\s*\((.+?)\)\s*{/g,"if ($1) {"),r=r.replace(/@else\s*{/g,"else {"),r=r.replace(/@for\s+(\w+)\s+in\s+(\w+)\s*{/g,"for (const $1 of $2) {"),r=r.replace(/@while\s*\((.+?)\)\s*{/g,"while ($1) {"),r=r.replace(/@on\s+(\w+)\s+([#.\w-]+)\s*{/g,'document.querySelector("$2").addEventListener("$1", () => {'),r=r.replace(/\n\s*\n/g,"\n"),r}(s),c=Object.getPrototypeOf(async function(){}).constructor;let n;try{n=new c("exports","imported","__ZS_IMPORT__","__ZS_MODULES__","__ZS_EXPORTS__",o)}catch(e){throw console.error("[ZoroonScript] Failed to construct AsyncFunction. See transpiled JS above."),e}const l={};return await n(l,e,t,e,r),l}catch(e){throw console.error("[ZoroonScript Runtime Error]:",e),e}}async function t(r,t){const o=await fetch(r);if(!o.ok)throw new Error(`Failed to fetch module '${r}' (status: ${o.status})`);const c=await o.text(),n=await s(c);return e[t]=n,window.ZS=window.ZS||{},window.ZS[t]=n,n}Object.defineProperty(window,"runZS",{value:s,writable:!1,configurable:!1}),document.querySelectorAll('script[type="application/x-opendnf-zs"]').forEach(async e=>{try{if(e.src){const r=await fetch(e.src),t=await r.text();await s(t)}else await s(e.textContent)}catch(e){console.error("[ZoroonScript] Error executing ZS script tag:",e)}})})();
